{% extends 'base.html' %}

{% block title %}Registration{% endblock %}

{% block content %}
<!--You need this load static tag to make it work-->
{% load static %}

    <style>
        label.star {
          float: right;
          padding: 10px;
          font-size: 18px;
          color: #444;
          transition: all .2s;
        }
    </style>

    <section class="page-title">
        My Ratings
    </section>

    <!-- Section used for displaying upcoming movies -->
        {% if status == 'failure' %}
        <section class="errors">
            <div id="movies-error">
                OOPS...<br>
                No movies have been rated yet. Please rate a movie to view your ratings.
            </div>
        </section>
        {% else %}
            <section class="movie-ratings">

                {% for result in results %}
                    <div class="movie-rating">
                        <table>
                            <tr>
                                <td>
                                    <form id="return_description_img" method="GET" action="/description/{{result.0.id}}/" onclick="submit();">
                                        {% csrf_token %}
                                        <span style="cursor:pointer">
                                            <input type="hidden" value={{result.0.id}} name="id_movie"><img style="width: 50px;" src="{{ result.2 }}{{ result.0.poster_path }}">
                                        </span>
                                    </form>
                                </td>
                                <td style="width:50px">
                                    <div class="rating-title">
                                        <form id="return_description" method="GET" action="/description/{{result.0.id}}/" onclick="submit();">
                                            {% csrf_token %}
                                            <span style="cursor:pointer">
                                                <input type="hidden" value={{result.0.id}} name="id_movie">{{ result.0.title }}
                                            </span>
                                        </form>
                                    </div>

                                    <div class="stars">
                                      <form method="POST" id="rating_stars_{{result.0.id}}">
                                          {% csrf_token %}
                                        {# onchange="this.form.submit();"#}
                                        <input class="star star-5" id="star-5" type="radio" name="star_{{result.0.id}}" value="5" onchange="rate_movie({{result.0.id}})" {% if result.1 == 5 %} checked{% endif %}/>
                                        <label class="star star-5" for="star-5"></label>
                                        <input class="star star-4" id="star-4" type="radio" name="star_{{result.0.id}}" value="4" onchange="rate_movie({{result.0.id}})" {% if result.1 == 4 %} checked{% endif %}/>
                                        <label class="star star-4" for="star-4"></label>
                                        <input class="star star-3" id="star-3" type="radio" name="star_{{result.0.id}}" value="3" onchange="rate_movie({{result.0.id}})" {% if result.1 == 3 %} checked{% endif %}/>
                                        <label class="star star-3" for="star-3"></label>
                                        <input class="star star-2" id="star-2" type="radio" name="star_{{result.0.id}}" value="2" onchange="rate_movie({{result.0.id}})" {% if result.1 == 2 %} checked{% endif %}/>
                                        <label class="star star-2" for="star-2"></label>
                                        <input class="star star-1" id="star-1" type="radio" name="star_{{result.0.id}}" value="1" onchange="rate_movie({{result.0.id}})" {% if result.1 == 1 %} checked{% endif %}/>
                                        <label class="star star-1" for="star-1"></label>
                                          <input type="hidden" value={{result.0.id}} name="id_movie"}>
                                      </form>
                                    </div><br><br>
                                </td>
                                <!--<td>{{result.0.id}}</td>-->
                            </tr>
                        </table>
                    </div>
                {% endfor %}
            </section>
        {% endif %}
    {% endblock %}
